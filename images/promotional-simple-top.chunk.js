(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"2WMd":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,o("rE2o"),o("ioFf"),o("rGqo"),o("/SS/"),o("KKXr"),o("VRzm");var r=_interopRequireDefault(o("aP5i")),n=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t["default"]=e,t}(o("p46w")),a=_interopRequireDefault(o("qF34")),i=_interopRequireDefault(o("7xuk")),u=_interopRequireDefault(o("L6Ds")),c=_interopRequireDefault(o("S+ax")),l=_interopRequireDefault(o("oP/V")),s=o("6OU5"),f=o("Lwym"),d=o("DJys"),p=o("8T6v"),y=o("szSY");function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var o=[],r=!0,n=!1,a=undefined;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(c){n=!0,a=c}finally{try{r||null==u["return"]||u["return"]()}finally{if(n)throw a}}return o}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o("jX4t");var m=function(e){function PromotionalSimpleTop(){var e,t,o;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PromotionalSimpleTop);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return _possibleConstructorReturn(o,(t=o=_possibleConstructorReturn(this,(e=_getPrototypeOf(PromotionalSimpleTop)).call.apply(e,[this].concat(n))),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"handleDomestictData",function(e,t){var r=e.data;return(0,s.isEmpty)(r)?o.getDomestictData(t):(o.syncState(r),Promise.reject({isCustom:200,msg:"数据获取成功 不再获取国内数据"}))}),_defineProperty(_assertThisInitialized(_assertThisInitialized(o)),"handleClose",function(e){e.preventDefault(),e.stopPropagation(),o.setState({isClose:!0})}),t))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PromotionalSimpleTop,r["default"].PureComponent),function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(PromotionalSimpleTop,[{key:"componentDidMount",value:function componentDidMount(){var e,t=this;this.getCityId().then(function(o){var r,n=_slicedToArray(e=o,3),a=n[0],i=n[1],u=n[2];"CN"!==a&&(r=(d.REGION[a]||d.REGION.DEFAULT).code);return d.PROVINCE[i]&&(r=d.PROVINCE[i].code),r?t.getOverseasData(r):t.getDomestictData(u)}).then(function(o){var r=e[1];return t.handleDomestictData(o,r)}).then(function(o){var r=e[3];return t.handleDomestictData(o,r)}).then(function(e){var o=e.data;t.syncState(o)})["catch"](function(e){e.isCustom?a["default"].info("%c ".concat(e.msg),"color:#6190E8"):a["default"].error(e)})}},{key:"dataCheck",value:function dataCheck(e){var t=e.code,o=e.data;return!(!Array.isArray(o)||(0,s.isEmpty)(o))&&(0===t&&o.some(function(e){return!!e.bigImageUrl}))}},{key:"syncState",value:function syncState(e){var t=(0,y.getRandomData)(e),o=t.href,r=t.ext1,n=t.bigImageUrl,a=t.imageUrl;this.setState({href:o,bgColor:r,img:(0,c["default"])(a),wideImg:(0,c["default"])(n)})}},{key:"getOverseasData",value:function getOverseasData(e){var t=this;return new Promise(function(o){(0,i["default"])(p.PROMOTIONAL_TOP_OVERSEAS,{retryTimes:0,name:"jsonpOverseas",params:{locid:e},dataCheck:t.dataCheck}).then(function(e){(0,s.isEmpty)(e)||t.setState({isOverseas:!0}),o(e)})["catch"](function(){o({code:0,msg:"ok",data:[]})})})}},{key:"getDomestictData",value:function getDomestictData(e){var t=this;return new Promise(function(o){(0,i["default"])(p.PROMOTIONAL_TOP_DOMESTIC,{retryTimes:0,name:"jsonpDomestict",dataCheck:t.dataCheck,params:{locid:e}}).then(o)["catch"](function(){o({code:0,msg:"ok",data:[]})})})}},{key:"getCityId",value:function getCityId(){var e=n.get("PCSYCityID");return(0,s.isNil)(e)?new Promise(function(e){(0,f.getLocation)().then(function(t){var o=t.regionid,r=t.provinceid,a=t.cityid,i=t.districtid,u="".concat(o,"_").concat(r,"_").concat(a,"_").concat(i);n.set("PCSYCityID",u,{expires:7,domain:".jd.com"}),e(u.split("_"))})}):Promise.resolve(e.split("_"))}},{key:"render",value:function render(){var e=this.props.isWide,t=this.state,o=t.img,n=t.wideImg,a=t.href,i=t.bgColor,u=t.isOverseas;if(t.isClose)return null;if(!o&&!n)return null;var c={backgroundColor:i},s={backgroundImage:"url(".concat(u?n:e?n:o,")")};return r["default"].createElement("a",{href:a,target:"_blank",style:c,"aria-label":"顶部推广",className:(0,l["default"])("promotional-top",{"promotional-top--overseas":u}),clstag:(0,y.generateClstag)("head|adtop_03")},r["default"].createElement("div",{className:"jd_container",style:s},r["default"].createElement("i",{className:"iconfont JD_close-button--square",onClick:this.handleClose,tabIndex:0,"aria-label":"关闭顶部推广"})))}}]),PromotionalSimpleTop}(),_=(0,u["default"])(m);t["default"]=_},DJys:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROVINCE=t.REGION=void 0;t.REGION={US:{value:"US",name:"美国",code:"840"},AU:{value:"AU",name:"澳大利亚",code:"36"},JP:{value:"JP",name:"日本",code:"392"},MY:{value:"MY",name:"马来西亚",code:"458"},SG:{value:"SG",name:"新加坡",code:"702"},CA:{value:"CA",name:"加拿大",code:"124"},GB:{value:"GB",name:"英国",code:"826"},ID:{value:"ID",name:"印度尼西亚",code:"360"},TH:{value:"TH",name:"泰国",code:"764"},RU:{value:"RU",name:"俄罗斯",code:"643"},DEFAULT:{value:"global",name:"全球通用",code:"784"}};t.PROVINCE={820000:{value:"820000",name:"中国澳门",code:"446"},810000:{value:"810000",name:"中国香港",code:"344"},710000:{value:"710000",name:"中国台湾",code:"158"}}},jX4t:function(e,t,o){}}]);